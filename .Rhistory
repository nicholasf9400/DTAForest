geom_text(aes(y = ind, x = 1, label = TP)) +
ggtitle('TP') + theme(plot.title = element_text(face = 'bold'))
FP <- table_base +
labs(title = 'FP') +
geom_text(aes(y = ind, x = 1, label = FP)) +
ggtitle('FP') + theme(plot.title = element_text(face = 'bold'))
FN <- table_base +
labs(title = 'FN') +
geom_text(aes(y = ind, x = 1, label = FN)) +
ggtitle('FN') + theme(plot.title = element_text(face = 'bold'))
TN <- table_base +
labs(title = 'TN') +
geom_text(aes(y = ind, x = 1, label = TN)) +
ggtitle('TN') + theme(plot.title = element_text(face = 'bold'))
tab2 <-  table_base +
geom_text(data = d, aes(y = ind, x = 1, label = Tærskel), size = 3.5,
position = 'identity') + ## decimal places
ggtitle("Tærskel for positivt fund") + theme(plot.title=element_text(face = 'bold'))
tab3 <-  table_base +
geom_text(aes(y = ind, x = 1, label = `Type HHUSD`)) + ## decimal places
ggtitle("Type HHUSD") + theme(plot.title=element_text(face = 'bold'))
grid.arrange(tab1, tab2, tab3, forest.sens, forest.spec, nrow=1, ncol=5)
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference), hjust=0) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference), hjust=1) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = 1, size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference), hjust=1) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = 0, size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference), hjust=1) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference), hjust=0) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = 0, size=12),
axis.text.x = element_text(color="white", hjust = 0, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference), hjust=0) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = 0, size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference), hjust=0) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference), hjust=-1) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference), hjust=5) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference), hjust=1) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference), hjust=1) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference), hjust=10) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = -3, size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference), hjust=1) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = 0, size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference), hjust=1) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference, hjust=0)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = 0.2, size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference, hjust=0)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = 0.5, size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference, hjust=0)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = 0.55, size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference, hjust=0)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = 0.54, size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference, hjust=0)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
TP <- table_base +
labs(title = 'TP') +
geom_text(aes(y = ind, x = 1, label = TP, hjust=0)) +
ggtitle('TP') + theme(plot.title = element_text(face = 'bold'))
FP <- table_base +
labs(title = 'FP') +
geom_text(aes(y = ind, x = 1, label = FP, hjust=0)) +
ggtitle('FP') + theme(plot.title = element_text(face = 'bold'))
FN <- table_base +
labs(title = 'FN') +
geom_text(aes(y = ind, x = 1, label = FN, hjust=0)) +
ggtitle('FN') + theme(plot.title = element_text(face = 'bold'))
TN <- table_base +
labs(title = 'TN') +
geom_text(aes(y = ind, x = 1, label = TN, hjust=0)) +
ggtitle('TN') + theme(plot.title = element_text(face = 'bold'))
tab2 <-  table_base +
geom_text(data = d, aes(y = ind, x = 1, label = Tærskel, hjust=0), size = 3.5,
position = 'identity') + ## decimal places
ggtitle("Tærskel for positivt fund") + theme(plot.title=element_text(face = 'bold'))
tab3 <-  table_base +
geom_text(aes(y = ind, x = 1, label = `Type HHUSD`, hjust=0)) + ## decimal places
ggtitle("Type HHUSD") + theme(plot.title=element_text(face = 'bold'))
grid.arrange(tab1, tab2, tab3, forest.sens, forest.spec, nrow=1, ncol=5)
tab1
TP
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference, hjust=0)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
TP <- table_base +
labs(title = 'TP') +
geom_text(aes(y = ind, x = 0, label = TP, hjust=0)) +
ggtitle('TP') + theme(plot.title = element_text(face = 'bold'))
TP
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = 0.54, size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference, hjust=0)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = -3, size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference, hjust=0)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(hjust = 0, size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(size=12),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference)) + ## decimal places
ggtitle("Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference)) + ## decimal places
ggtitle("Studie", hjust = 1) + theme(plot.title=element_text(face = 'bold'))
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference)) + ## decimal places
ggtitle(aes(hjust=0),"Studie") + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference)) + ## decimal places
ggtitle(aes("Studie", hjust=0)) + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 1, label = Reference)) + ## decimal places
ggtitle(aes("Studie", hjust=0.5)) + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference)) + ## decimal places
ggtitle(aes("Studie", hjust=0.5)) + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference, hjust=0)) + ## decimal places
ggtitle(aes("Studie", hjust=0.5)) + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference, hjust=0)) + ## decimal places
ggtitle(aes("Studie", nudge.y=1)) + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference, hjust=0)) + ## decimal places
ggtitle(aes("Studie", nudge.y=10)) + theme(plot.title=element_text(face = 'bold'))
tab1
table_base <- ggplot(d, aes(y=Reference)) +
ylab(NULL) + xlab("  ") +
theme(plot.title = element_text(size=12, hjust=0),
axis.text.x = element_text(color="white", hjust = -3, size = 25), ## This is used to help with alignment
axis.line = element_blank(),
axis.text.y = element_blank(),
axis.ticks = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_blank())
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference, hjust=0)) + ## decimal places
ggtitle(aes("Studie", nudge.y=10)) + theme(plot.title=element_text(face = 'bold'))
tab1
tab1 <- table_base +
labs(title = "Reference") +
geom_text(aes(y = ind, x = 0, label = Reference, hjust=0)) + ## decimal places
ggtitle(aes("Studie")) + theme(plot.title=element_text(face = 'bold'))
tab1
install.packages("forestplot")
library(forestplot)
d <- read_excel('Systolisk hjertesvigt.xlsx')
#Compute sens and spec plus CI
sesp_temp <- matrix(NA, ncol=6, nrow = nrow(d))
for (i in 1:nrow(d)) {
temp <- epi.tests(c(d$TP[i], d$FP[i], d$FN[i], d$TN[i]))
temp <- temp[[1]][c(3,4),]
sesp_temp[i,] <- as.numeric(cbind(temp[1,2:4], temp[2,2:4]))
}
colnames(sesp_temp) <- c('sens', 'sensLL', 'sensUL',
'spec', 'specLL', 'specUL')
library(forestplot)
setwd('C:/Users/NicholasFitzhugh/OneDrive - Behandlingsraadet/Scripts/DTA forest plot')
#Test data
require(readxl)
d <- read_excel('Systolisk hjertesvigt.xlsx')
#Compute sens and spec plus CI
sesp_temp <- matrix(NA, ncol=6, nrow = nrow(d))
for (i in 1:nrow(d)) {
temp <- epi.tests(c(d$TP[i], d$FP[i], d$FN[i], d$TN[i]))
temp <- temp[[1]][c(3,4),]
sesp_temp[i,] <- as.numeric(cbind(temp[1,2:4], temp[2,2:4]))
}
colnames(sesp_temp) <- c('sens', 'sensLL', 'sensUL',
'spec', 'specLL', 'specUL')
d <- cbind(d, sesp_temp)
d$ind <- 1:nrow(d)
d %>% forestplot(labeltext = c(Study, Tærskel, sens))
d %>% forestplot(labeltext = c(Study, Tærskel, sens),
mean = sens,
lower = sensLL,
upper = sensUL)
d %>% forestplot(labeltext = c(studie, Tærskel, sens),
mean = sens,
lower = sensLL,
upper = sensUL)
d %>% forestplot(labeltext = c(Studie, Tærskel, sens),
mean = sens,
lower = sensLL,
upper = sensUL)
d %>% forestplot(labeltext = c(Reference, Tærskel, sens),
mean = sens,
lower = sensLL,
upper = sensUL)
d %>% forestplot(labeltext = c(Reference, Tærskel, sens),
mean = sens,
lower = sensLL,
upper = sensUL) %>%
fp_add_header(Reference = c('Studie'),
Tærskel = c('Tærksel'),
sens = c('Sensitivitet'))
colnames(d) <- c('Reference', 'Tærskel', 'TP', 'FP', 'FN', 'TN', 'MetodeH', 'TypeH', 'MetodeU', 'sens', 'sensLL', 'sensUL', 'spec', 'specLL', 'specUL')
d %>% forestplot(labeltext = c(Reference, Tærskel, MetodeH, TypeH, MetodeU, TP, FP, FN, TN, sens, spec),
mean = sens,
lower = sensLL,
upper = sensUL) %>%
fp_add_header(Reference = c('Studie'),
Tærskel = c('Tærksel'),
sens = c('Sensitivitet'),
MetodeU = c('Metode for vurdering (HHUSD'),
MetodeH = c('Metode for vurdering (mid-/high-range ultralyd)'),
TypeH = c('Type (HHUSD)'),
TP = 'TP', FP = 'FP', FN = 'FN', TN = 'TN')
